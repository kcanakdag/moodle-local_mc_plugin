{"version":3,"file":"admin.min.js","sources":["../src/admin.js"],"sourcesContent":["/**\n * Main entry point for the admin settings page.\n *\n * This module coordinates all admin page functionality.\n *\n * @module     local_mc_plugin/admin\n * @copyright  2025 Kerem Can Akdag\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport * as EventSelector from './local/admin/event_selector';\nimport * as ConnectionStatus from './local/admin/connection_status';\nimport * as ActionButtons from './local/admin/action_buttons';\nimport * as Connect from './connect';\n\n/**\n * Hide Moodle's default save button since we use custom AJAX saving.\n * Uses a theme-agnostic approach by finding submit buttons in the admin form.\n */\nconst hideDefaultSaveButton = () => {\n    const form = document.getElementById('adminsettings');\n    if (!form) {\n        return;\n    }\n\n    // Find all submit buttons in the form\n    const submitButtons = form.querySelectorAll('button[type=\"submit\"]');\n    submitButtons.forEach(btn => {\n        // Skip our custom buttons\n        if (btn.closest('.local_mc_plugin_action_buttons') || btn.closest('[data-region=\"action-buttons\"]')) {\n            return;\n        }\n\n        // Hide the button's container (try .row first, then parent div)\n        const container = btn.closest('.row') || btn.parentElement;\n        if (container) {\n            container.style.display = 'none';\n        }\n    });\n};\n\n/**\n * Initialize the event selector component.\n *\n * @param {Object} cfg Configuration object\n * @param {string} cfg.inputId The hidden input element ID\n */\nexport const initEventSelector = (cfg) => {\n    EventSelector.init(cfg.inputId);\n};\n\n/**\n * Initialize the connection status component.\n *\n * @param {Object} cfg Configuration object\n * @param {string} cfg.syncUrl URL to sync_schema.php\n * @param {string} cfg.sesskey Moodle session key\n * @param {string} cfg.eventInputId Event selector input ID for counter refresh\n */\nexport const initConnectionStatus = (cfg) => {\n    // Hide default save button when connection status initializes\n    hideDefaultSaveButton();\n    ConnectionStatus.init(cfg);\n};\n\n/**\n * Initialize the action buttons component.\n *\n * @param {Object} cfg Configuration object\n * @param {string} cfg.syncUrl URL to sync_schema.php\n * @param {string} cfg.ajaxSaveUrl URL to ajax_save.php\n * @param {string} cfg.sesskey Moodle session key\n */\nexport const initActionButtons = (cfg) => {\n    ActionButtons.init(cfg);\n};\n\n/**\n * Initialize the connect button component.\n *\n * @param {Object} cfg Configuration object\n * @param {string} cfg.connectUrl URL to connect.php\n * @param {string} cfg.saveUrl URL to ajax_save.php\n * @param {string} cfg.apiUrl MoodleConnect API URL\n * @param {string} cfg.frontendUrl MoodleConnect frontend URL\n * @param {string} cfg.sesskey Moodle session key\n * @param {boolean} cfg.isConnected Whether already connected\n */\nexport const initConnect = (cfg) => {\n    Connect.init(cfg);\n};\n"],"names":["cfg","EventSelector","init","inputId","form","document","getElementById","querySelectorAll","forEach","btn","closest","container","parentElement","style","display","hideDefaultSaveButton","ConnectionStatus","ActionButtons","Connect"],"mappings":";;;;;;;;;sZA+CkCA,MAC9BC,cAAcC,KAAKF,IAAIG,wCAWUH,MAxCP,YACpBI,KAAOC,SAASC,eAAe,qBAChCF,YAKiBA,KAAKG,iBAAiB,yBAC9BC,SAAQC,SAEdA,IAAIC,QAAQ,oCAAsCD,IAAIC,QAAQ,+CAK5DC,UAAYF,IAAIC,QAAQ,SAAWD,IAAIG,cACzCD,YACAA,UAAUE,MAAMC,QAAU,YAyBlCC,GACAC,iBAAiBd,KAAKF,iCAWQA,MAC9BiB,cAAcf,KAAKF,2BAcKA,MACxBkB,QAAQhB,KAAKF"}