define("local_mc_plugin/local/admin/event_selector",["exports","./selectors","core/str"],(function(_exports,_selectors,_str){var obj;
/**
   * Event selector module for the admin settings page.
   *
   * Handles event search, filtering, and bulk selection.
   *
   * @module     local_mc_plugin/local/admin/event_selector
   * @copyright  2025 Kerem Can Akdag
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.setSyncedEvents=_exports.refreshCounter=_exports.init=void 0,_selectors=(obj=_selectors)&&obj.__esModule?obj:{default:obj};let syncedEvents=[],strings={};const updateValue=inputId=>{const hiddenInput=(inputId=>document.getElementById(inputId))(inputId),counter=document.querySelector(_selectors.default.events.counter(inputId));if(!hiddenInput||!counter)return;const selected=[];if(document.querySelectorAll("".concat(_selectors.default.events.checkbox,":checked")).forEach((cb=>{selected.push(cb.getAttribute("data-class"))})),hiddenInput.value=selected.join(","),syncedEvents.length>0){const toAdd=selected.filter((evt=>!syncedEvents.includes(evt))).length,toRemove=syncedEvents.filter((evt=>!selected.includes(evt))).length;if(0===toAdd&&0===toRemove)counter.innerHTML=strings.selectedCount.replace("{$a}",selected.length)+' <span style="color:#155724;">• '.concat(strings.allSynced,"</span>");else{const changes=[];toAdd>0&&changes.push("".concat(toAdd," ").concat(strings.newEvents)),toRemove>0&&changes.push("".concat(toRemove," ").concat(strings.removed)),counter.innerHTML=strings.selectedCount.replace("{$a}",selected.length)+' <span style="color:#856404;">• '.concat(changes.join(", "),"</span>")}}else counter.textContent=strings.selectedCount.replace("{$a}",selected.length)};_exports.setSyncedEvents=events=>{syncedEvents=events||[]};_exports.refreshCounter=inputId=>{updateValue(inputId)};_exports.init=async inputId=>{await(async()=>{const results=await(0,_str.get_strings)([{key:"event_selected_count",component:"local_mc_plugin"},{key:"event_all_synced",component:"local_mc_plugin"},{key:"event_new",component:"local_mc_plugin"},{key:"event_removed",component:"local_mc_plugin"}]);strings={selectedCount:results[0],allSynced:results[1],newEvents:results[2],removed:results[3]}})(),updateValue(inputId),document.addEventListener("change",(e=>{e.target.classList.contains("event-checkbox")&&updateValue(inputId)})),document.querySelectorAll(_selectors.default.events.categoryTitle).forEach((title=>{title.addEventListener("click",(()=>{const events=title.nextElementSibling;events.style.display="none"===events.style.display?"block":"none"}))}));const searchInput=document.querySelector(_selectors.default.events.searchInput(inputId));searchInput&&searchInput.addEventListener("keyup",(e=>{(term=>{const lowerTerm=term.toLowerCase();document.querySelectorAll(_selectors.default.events.eventItem).forEach((item=>{item.textContent.toLowerCase().includes(lowerTerm)?item.classList.remove(_selectors.default.events.hiddenClass):item.classList.add(_selectors.default.events.hiddenClass)})),document.querySelectorAll(_selectors.default.events.category).forEach((cat=>{0===cat.querySelectorAll("".concat(_selectors.default.events.eventItem,":not(.").concat(_selectors.default.events.hiddenClass,")")).length?cat.classList.add(_selectors.default.events.hiddenClass):cat.classList.remove(_selectors.default.events.hiddenClass)}))})(e.target.value)}));const selectBtn=document.querySelector(_selectors.default.events.selectVisibleBtn(inputId));selectBtn&&selectBtn.addEventListener("click",(()=>(inputId=>{document.querySelectorAll("".concat(_selectors.default.events.eventItem,":not(.").concat(_selectors.default.events.hiddenClass,") ").concat(_selectors.default.events.checkbox)).forEach((cb=>{cb.checked=!0})),updateValue(inputId)})(inputId)));const deselectBtn=document.querySelector(_selectors.default.events.deselectVisibleBtn(inputId));deselectBtn&&deselectBtn.addEventListener("click",(()=>(inputId=>{document.querySelectorAll("".concat(_selectors.default.events.eventItem,":not(.").concat(_selectors.default.events.hiddenClass,") ").concat(_selectors.default.events.checkbox)).forEach((cb=>{cb.checked=!1})),updateValue(inputId)})(inputId)))}}));

//# sourceMappingURL=event_selector.min.js.map