define("local_mc_plugin/local/admin/repository",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.syncEvents=_exports.saveSettings=_exports.saveCredentials=_exports.pollConnectionStatus=_exports.initConnection=_exports.getConnectionStatus=void 0;
/**
   * Repository module for AJAX calls to the backend.
   *
   * @module     local_mc_plugin/local/admin/repository
   * @copyright  2025 Kerem Can Akdag
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */
const postForm=async(url,data)=>{const params=new URLSearchParams;Object.entries(data).forEach((_ref=>{let[key,value]=_ref;params.append(key,value)}));return(await fetch(url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:params.toString()})).json()};_exports.initConnection=async(connectUrl,sesskey)=>postForm(connectUrl,{action:"init",sesskey:sesskey});_exports.pollConnectionStatus=async(apiUrl,token)=>(await fetch("".concat(apiUrl,"/connect/status?token=").concat(encodeURIComponent(token)))).json();_exports.saveCredentials=async(saveUrl,sesskey,siteKey,siteSecret)=>postForm(saveUrl,{action:"save",sesskey:sesskey,siteKey:siteKey,siteSecret:siteSecret});_exports.getConnectionStatus=async(syncUrl,sesskey)=>postForm(syncUrl,{action:"status",sesskey:sesskey});_exports.saveSettings=async(ajaxSaveUrl,sesskey,values)=>postForm(ajaxSaveUrl,{action:"save",sesskey:sesskey,...values});_exports.syncEvents=async(syncUrl,sesskey)=>postForm(syncUrl,{action:"sync",sesskey:sesskey})}));

//# sourceMappingURL=repository.min.js.map