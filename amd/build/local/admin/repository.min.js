/**
 * Repository module for AJAX calls to the backend.
 *
 * @module     local_mc_plugin/local/admin/repository
 * @copyright  2025 Kerem Can Akdag
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define([],function(){"use strict";const n=async(n,t)=>{const e=new URLSearchParams;Object.entries(t).forEach(([n,t])=>{e.append(n,t)});return(await fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e.toString()})).json()};return{initConnection:async function(t,e){return n(t,{action:"init",sesskey:e})},pollConnectionStatus:async function(n,t){return(await fetch(`${n}/connect/status?token=${encodeURIComponent(t)}`)).json()},saveCredentials:async function(t,e,s,c){return n(t,{action:"save",sesskey:e,siteKey:s,siteSecret:c})},getConnectionStatus:async function(t,e){return n(t,{action:"status",sesskey:e})},saveSettings:async function(t,e,s){return n(t,{action:"save",sesskey:e,...s})},syncEvents:async function(t,e){return n(t,{action:"sync",sesskey:e})}}});